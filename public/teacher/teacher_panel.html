<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard | UBigkas</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* ===== STANDARDIZED DESIGN SYSTEM ===== */
        :root {
            --maroon: #7a0c0c;
            --gold: #d4af37;
            --bg: #f8f9fa;
            --card-bg: #fff;
            --nav-text: #333;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --text-scale: 100%;
            --danger: #d9534f;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg);
            margin: 0;
            overflow-x: hidden;
            font-size: var(--text-scale);
            transition: var(--transition);
        }

        /* ===== DRIP EFFECT ===== */
        #drip-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10001;
        }
        .drip-layer {
            position: absolute;
            top: -110%; left: 0; width: 100%; height: 120%;
            background-color: #121212; 
            transition: top 0.7s cubic-bezier(0.645, 0.045, 0.355, 1);
            clip-path: url(#drip-path);
        }
        #drip-container.active .drip-layer { top: 0; }
        .drip-light { background-color: #fdfdfd !important; }

        /* ===== STANDARDIZED NAVIGATION ===== */
        nav {
            display: flex;
            align-items: center;
            padding: 0 5%;
            height: 80px;
            background-color: var(--card-bg);
            border-bottom: 3px solid var(--maroon);
            box-shadow: 0px 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .burger-menu {
            display: none; 
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            background: none;
            border: none;
            padding: 10px;
            z-index: 1002;
            margin-right: 15px;
        }
        .burger-menu span { 
            width: 25px; height: 3px; 
            background-color: var(--white); 
            border-radius: 2px; 
            transition: 0.3s; 
        }

        nav .logo { 
            font-size: 1.8rem; font-weight: 800; 
            text-decoration: none; color: var(--white); 
            margin-right: 40px;
        }
        nav .logo span { color: var(--gold); }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
            margin: 0; padding: 0;
        }
        .nav-links li a {
            text-decoration: none; color: var(--nav-text);
            font-weight: 500; transition: color 0.3s;
        }
        .nav-links li a:hover { color: var(--gold); }

        /* Settings Dropdown (Desktop) */
        .nav-actions { margin-left: auto; position: relative; display: flex; align-items: center; }
        .dropdown-content { 
            display: none; position: absolute; right: 0; top: 100%; 
            background-color: white; min-width: 200px; margin-top: 15px; 
            box-shadow: 0px 8px 16px rgba(0,0,0,0.15); border-radius: 12px; 
            z-index: 9999; overflow: hidden; border: 1px solid #eee;
        }
        .dropdown-content.is-active { display: block; }
        .dropdown-content button { 
            width: 100%; padding: 12px 16px; text-align: left; border: none; 
            background: none; font-family: inherit; cursor: pointer;
            display: flex; align-items: center; gap: 10px; color: #333; transition: 0.2s;
        }
        .dropdown-content button:hover { background-color: #f8f9fa; }

        /* Mobile Side Drawer */
        .mobile-menu {
            position: fixed; top: 0; left: -100%; width: 280px; height: 100vh;
            background-color: var(--card-bg); display: flex; flex-direction: column;
            padding: 100px 30px 30px; box-shadow: 10px 0 20px rgba(0,0,0,0.1);
            transition: left 0.4s cubic-bezier(0.77, 0, 0.175, 1);
            z-index: 1001; margin: 0; list-style: none;
        }
        .mobile-menu.show { left: 0; }
        .mobile-menu li a { display: block; padding: 15px 0; text-decoration: none; color: var(--nav-text); font-weight: 500; }
        .mobile-menu button { 
            width: 100%; padding: 12px; margin-top: 10px; text-align: left;
            background: #f1f1f1; border: none; border-radius: 8px; font-family: inherit; cursor: pointer;
        }

        @media (max-width: 850px) {
            .burger-menu { display: flex; }
            .nav-links, .nav-actions { display: none; }
            nav .logo { margin-right: auto; }
        }

        /* ===== DASHBOARD & FORMS ===== */
        .dashboard-container { padding: 40px 5%; max-width: 1200px; margin: 0 auto; }
        .dashboard-card { 
            background: var(--card-bg); border-radius: 20px; padding: 2.5rem; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; margin: 20px 0;
        }
        .btn { padding: 12px 25px; border-radius: 30px; border: none; font-weight: 600; cursor: pointer; transition: var(--transition); font-family: inherit; }
        .btn-maroon { background: var(--maroon); color: white; }
        .btn-gold { background: var(--gold); color: white; }

        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 20000; justify-content: center; align-items: center; backdrop-filter: blur(4px); }
        .modal-card { background: var(--card-bg); padding: 30px; border-radius: 24px; width: 90%; max-width: 450px; }
        
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--nav-text); }
        
        /* Fixed Input/Select sizing */
        .form-group input, .form-group select { 
            width: 100%; padding: 12px; border-radius: 10px; 
            border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem;
            box-sizing: border-box; background: var(--card-bg); color: var(--nav-text);
        }

        /* ===== DARK MODE ===== */
        body.dark-mode { --bg: #121212; --card-bg: #1e1e1e; --nav-text: #ffffff; color: #e0e0e0; }
        body.dark-mode nav { background-color: #202020; }
        body.dark-mode .dropdown-content { background-color: #1e1e1e; border-color: #333; }
        body.dark-mode .dropdown-content button { color: #fff; }
        body.dark-mode .dropdown-content button:hover { background-color: #2a2a2a; }
        body.dark-mode .mobile-menu { background-color: #1e1e1e; }
        body.dark-mode .mobile-menu button { background: #2a2a2a; color: white; }
        body.dark-mode .burger-menu span { background-color: #ffffff; }

        .footer-credit { text-align: center; padding: 40px 20px; color: #888; font-size: 0.9rem; }
    </style>
</head>
<body>

<div id="drip-container">
    <div id="dripLayer" class="drip-layer"></div>
    <svg width="0" height="0"><defs><clipPath id="drip-path" clipPathUnits="objectBoundingBox"><path d="M0,0 L1,0 L1,0.8 C0.9,0.95 0.85,0.7 0.75,0.85 C0.65,1 0.55,0.75 0.5,0.9 C0.45,0.75 0.35,1 0.25,0.85 C0.15,0.7 0.1,0.95 0,0.8 Z"></path></clipPath></defs></svg>
</div>

<nav>
    <button class="burger-menu" id="burgerBtn"><span></span><span></span><span></span></button>
    <a href="teacher_panel.html" class="logo">UB<span>igkas</span></a>
    
    <ul class="nav-links">
        <li><a href="teacher_panel.html">Dashboard</a></li>
        <li><a href="list.html">Class List</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
    </ul>

    <div class="nav-actions">
        <button id="settingsBtn" class="btn btn-maroon" style="padding: 8px 20px; font-size: 0.9rem;">Settings ‚öôÔ∏è</button>
        <div class="dropdown-content" id="settingsDropdown">
            <button class="theme-toggle">üåô Dark Mode</button>
            <button class="size-toggle">üîç Text Size</button>
            <hr style="border:0; border-top:1px solid #eee; margin:0;">
            <button class="logout-trigger" style="color:var(--danger)">üö™ Logout</button>
        </div>
    </div>
</nav>

<ul class="mobile-menu" id="mobileMenu">
    <li><a href="teacher_panel.html">Dashboard</a></li>
    <li><a href="list.html">Class List</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="contact.html">Contact</a></li>
    <div style="margin-top:20px; border-top:1px solid #eee; padding-top:20px;">
        <button class="theme-toggle">üåô Dark Mode</button>
        <button class="size-toggle">üîç Text Size</button>
        <button class="logout-trigger" style="color:var(--danger);">üö™ Logout</button>
    </div>
</ul>

<div id="logoutModal" class="modal-overlay">
    <div class="modal-card" style="text-align: center;">
        <h3>Logout Confirmation</h3>
        <p>Are you sure you want to logout?</p>
        <div style="display:flex; gap:10px; justify-content:center; margin-top:20px;">
            <button id="cancelLogout" class="btn" style="background:#eee; color:#333;">Cancel</button>
            <button id="confirmLogout" class="btn btn-maroon">Logout</button>
        </div>
    </div>
</div>

<main class="dashboard-container">
    <div class="dashboard-card">
        <h1 style="color: var(--white); margin-bottom: 15px;">Teacher Dashboard</h1>
        <p style="margin-bottom: 30px;">Manage students, classes, and learning materials.</p>
        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <button class="btn btn-maroon" id="openStudentCardBtn">Add Student</button>
            <button class="btn btn-gold" id="openClassCardBtn">Create Class</button>
        </div>
    </div>
</main>

<div id="studentCard" class="modal-overlay">
    <div class="modal-card">
        <h2 style="color: var(--gold); margin-bottom: 20px;">Add New Student</h2>
        <form id="studentForm">
            <div class="form-group"><label>Full Name</label><input type="text" placeholder="Juan Dela Cruz" required></div>
            <div class="form-group"><label>Email Address</label><input type="email" placeholder="1234567@ub.edu.ph" required></div>
            <div class="form-group"><label>Temporary Password</label><input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required></div>
            <div class="form-group">
                <label>Assigned Class</label>
                <select required><option value="">Select Class</option></select>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="button" class="close-modal btn" style="flex: 1; background:#eee; color:#333;">Cancel</button>
                <button type="submit" class="btn btn-maroon" style="flex: 2;">‚ú® Create Account</button>
            </div>
        </form>
    </div>
</div>

<div id="classCard" class="modal-overlay">
    <div class="modal-card">
        <h2 style="color: var(--gold); margin-bottom: 20px;">Create New Class</h2>
        <form id="classForm">
            <div class="form-group">
                <label>Class Name / Section</label>
                <input type="text" placeholder="e.g. GRADE-10-A" required>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="button" class="close-modal btn" style="flex: 1; background:#eee; color:#333;">Cancel</button>
                <button type="submit" class="btn btn-gold" style="flex: 2;">Add Class</button>
            </div>
        </form>
    </div>
</div>

<footer class="footer-credit">¬©2026 University of Batangas ‚Äì Lipa City</footer>

<script type="module">
    import { auth } from "../firebase.js";
    import { signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const burgerBtn = document.getElementById("burgerBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    const settingsBtn = document.getElementById("settingsBtn");
    const settingsDropdown = document.getElementById("settingsDropdown");

    // Toggle Burger
    burgerBtn.onclick = (e) => { e.stopPropagation(); mobileMenu.classList.toggle("show"); };
    // Toggle Settings
    settingsBtn.onclick = (e) => { e.stopPropagation(); settingsDropdown.classList.toggle("is-active"); };

    // Close menus on outside click
    document.addEventListener('click', (e) => {
        if (!burgerBtn.contains(e.target) && !mobileMenu.contains(e.target)) mobileMenu.classList.remove("show");
        if (!settingsBtn.contains(e.target)) settingsDropdown.classList.remove("is-active");
    });

    // Unified Theme Logic
    const dripContainer = document.getElementById("drip-container");
    const dripLayer = document.getElementById("dripLayer");
    document.querySelectorAll('.theme-toggle').forEach(btn => {
        btn.onclick = () => {
            const isDark = document.body.classList.contains("dark-mode");
            dripLayer.classList.toggle("drip-light", isDark);
            dripContainer.classList.add("active");
            setTimeout(() => {
                document.body.classList.toggle("dark-mode");
                localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
            }, 350);
            setTimeout(() => dripContainer.classList.remove("active"), 700);
        };
    });
    if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark-mode");

    // Text Size Logic
    const sizes = ["100%", "110%", "120%"];
    let sIdx = sizes.indexOf(localStorage.getItem("textSize") || "100%");
    document.querySelectorAll('.size-toggle').forEach(btn => {
        btn.onclick = () => {
            sIdx = (sIdx + 1) % sizes.length;
            document.documentElement.style.setProperty('--text-scale', sizes[sIdx]);
            localStorage.setItem("textSize", sizes[sIdx]);
        };
    });

    // Modal Control
    const openModals = (id) => document.getElementById(id).style.display = "flex";
    const closeAllModals = () => document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = "none");

    document.getElementById("openStudentCardBtn").onclick = () => openModals("studentCard");
    document.getElementById("openClassCardBtn").onclick = () => openModals("classCard");
    document.querySelectorAll('.close-modal').forEach(btn => btn.onclick = closeAllModals);

    // Logout
    document.querySelectorAll('.logout-trigger').forEach(btn => btn.onclick = () => openModals("logoutModal"));
    document.getElementById("cancelLogout").onclick = closeAllModals;
    document.getElementById("confirmLogout").onclick = async () => {
        await signOut(auth);
        window.location.href = "../index.html";
    };
</script>
</body>
</html>